##
# LAUNCH LOCAL DEVELOPMENT ENVIRONMENT
##

#
# EDITORS
#

new_tab Editors

enabled_layouts horizontal

cd ~/Code/ticker
launch --title "Frontend editor"
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Frontend editor$' 'nvim'"

#
# SERVERS
#

new_tab Servers

enabled_layouts horizontal

cd ~/Code/ticker
launch --title "Frontend server"
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Frontend server$' 'yarn && yarn dev'"

cd ~/Code/ticker-backend
launch --title "Backend server" -- nix-shell /etc/nixos/shell/node12.nix --command zsh
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Backend server$' 'yarn && yarn dev'"

#
# SHELLS
#

new_tab Shells

enabled_layouts horizontal

cd ~/Code/ticker
launch --title "Frontend shell"

cd ~/Code/ticker-backend
launch --title "Backend shell" -- nix-shell /etc/nixos/shell/node12.nix --command zsh

#
# PROXIES
#

new_tab VPN

enabled_layouts vertical

launch --title "VPN"
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^VPN$' 'openvpn3 session-start -c leeroy || openvpn3 config-import --config ~/Secrets/openvpn/leeroy.ovpn --name leeroy --persistent && openvpn3 session-start -c leeroy'"

# vim:ft=kitty
