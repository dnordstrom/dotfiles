#
# START DEVELOPMENT SERVERS AND PROXIES
#

#
# EDITORS
#

new_tab Editors

enabled_layouts horizontal

cd ~/Code/ticker
launch --title "Frontend editor" -- zsh -c vim

cd ~/Code/ticker-backend
launch --title "Backend editor" -- nix-shell /etc/nixos/shell/node12.nix --command zsh -c vim

#
# SHELLS
#

new_tab Shells

enabled_layouts horizontal

cd ~/Code/ticker
launch --title "Frontend shell"

cd ~/Code/ticker-backend
launch --title "Backend shell" -- nix-shell /etc/nixos/shell/node12.nix --command zsh

#
# SERVERS
#

new_tab Servers

enabled_layouts horizontal

cd ~/Code/ticker
launch --title "Frontend server"

cd ~/Code/ticker-backend
launch --title "Backend server" nix-shell /etc/nixos/shell/node12.nix --command zsh

# Prefill command lines (delay for zsh launch)

launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Frontend server$' 'yarn && yarn dev'"
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Backend server$' 'yarn && yarn dev'"

#
# PROXIES
#

new_tab Proxies

enabled_layouts vertical

launch --title "Proxy" /etc/nixos/secrets/convox-proxy-engine-test.sh
launch --title "Proxy" /etc/nixos/secrets/convox-proxy-engine-analytics-test.sh
launch --title "Proxy" /etc/nixos/secrets/convox-proxy-icc-test.sh
launch --title "Proxy" /etc/nixos/secrets/convox-proxy-estimates-test.sh
launch --title "Proxy" /etc/nixos/secrets/convox-proxy-chronos-test.sh

# vim:ft=kitty
