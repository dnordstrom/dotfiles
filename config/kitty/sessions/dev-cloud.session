##
# CLOUD DEVELOPMENT INIT
##

#
# EDITORS
#

new_tab Editors

enabled_layouts horizontal

launch --cwd ~/Code/ticker --title "Frontend editor" -- zsh -c "nvim; exec zsh"
launch --cwd ~/Code/ticker --title "Frontend editor shell"

#
# SHELLS
#

new_tab Shells

enabled_layouts horizontal

launch --cwd ~/Code/ticker --title "Frontend shell"
launch --cwd ~/Code/ticker-backend --title "Backend shell"

#
# SERVERS
#

new_tab Servers

enabled_layouts horizontal

launch --cwd ~/Code/ticker --title "Frontend server"
launch --cwd ~/Code/ticker-backend --title "Backend server"

launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Frontend\sserver$' 'yarn && yarn dev'"
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^Backend\sserver$' 'yarn && yarn dev'"

#
# PROXIES
#

new_tab VPN

enabled_layouts vertical

launch --title "VPN"
launch zsh -c "sleep 1 && kitty @ send-text --match title:'^VPN$' 'openvpn3 session-start -c leeroy || openvpn3 config-import --config ~/Secrets/openvpn/leeroy.ovpn --name leeroy --persistent && openvpn3 session-start -c leeroy'"

# vim:ft=kitty
